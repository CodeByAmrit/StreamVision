<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RTSP Live Stream Viewer | StreamVision</title>
    <meta
      name="description"
      content="StreamVision - View your RTSP camera feeds live with a powerful, modern, and secure web viewer."
    />
    <meta
      name="keywords"
      content="live cctv camera feed, watch security camera online, ip camera live stream, remote video surveillance viewer, public webcams, real-time monitoring, rtsp hls stream player"
    />
    <meta name="author" content="Amrit, Developer of StreamVision" />

    <link rel="canonical" href="https://cctvcameralive.in/" />
    <meta name="robots" content="index, follow" />
    <meta property="og:title" content="StreamVision | RTSP Live CCTV Viewer" />
    <meta
      property="og:description"
      content="Real-time RTSP CCTV camera streaming using HLS and analytics."
    />
    <meta
      property="og:image"
      content="https://cctvcameralive.in/images/banner.svg"
    />
    <meta property="og:url" content="https://cctvcameralive.in" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="StreamVision | RTSP Live CCTV Viewer" />
    <meta
      name="twitter:description"
      content="Real-time RTSP CCTV camera streaming using HLS and analytics."
    />
    <meta
      name="twitter:image"
      content="https://cctvcameralive.in/images/banner.svg"
    />

    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="manifest" href="/site.webmanifest" />

    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="/css/style.css?v=5.3" nonce="<%= nonce %>" />

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"
      defer
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"
      defer
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/flowbite@1.4.0/dist/flowbite.min.js"
      defer
      nonce="<%= nonce %>"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/hls.js@latest"
      defer
      nonce="<%= nonce %>"
    ></script>

    <meta
      http-equiv="Cache-Control"
      content="no-store, no-cache, must-revalidate, max-age=0"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <style>
      /* Simple style for the loader */
      .loader {
        border-top-color: #f68f3b; /* Updated to blue */
        -webkit-animation: spinner 1.5s linear infinite;
        animation: spinner 1.5s linear infinite;
      }
      @-webkit-keyframes spinner {
        0% {
          -webkit-transform: rotate(0deg);
        }
        100% {
          -webkit-transform: rotate(360deg);
        }
      }
      @keyframes spinner {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>

  <body
    class="dark:bg-black font-sans text-slate-800 dark:text-slate-200 antialiased overflow-x-hidden"
  >
    <header
      class="sticky top-0 z-50 w-full bg-[#100f12]/80 backdrop-blur-md border-b border-[#4A4654]/40"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <a href="/" class="flex items-center space-x-3">
            <img src="/images/old.svg" class="h-8" alt="StreamVision Logo" />
            <span
              class="text-2xl font-bold bg-gradient-to-r from-cyan-300 to-purple-400 bg-clip-text text-transparent drop-shadow-[0_0_10px_rgba(115,251,253,0.4)]"
            >
              Netwon Team
            </span>
          </a>

          <div class="flex items-center space-x-4">
            <button
              id="theme-toggle"
              type="button"
              class="p-2 rounded-xl text-[#4A4654] hover:bg-[#382F2A]/60 hover:text-cyan-300 focus:outline-none focus:ring-2 focus:ring-cyan-300 focus:ring-offset-2 focus:ring-offset-[#100f12] transition-all"
            >
              <svg
                id="theme-toggle-dark-icon"
                class="hidden w-5 h-5"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                ></path>
              </svg>

              <svg
                id="theme-toggle-light-icon"
                class="hidden w-5 h-5"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </button>

            <a
              href="https://service.cctvcameralive.in/"
              class="hidden sm:inline-block px-4 py-2 text-sm font-semibold text-cyan-200 hover:text-white transition-colors"
            >
              Support
            </a>

            <a
              href="/login"
              class="px-4 py-2 text-sm font-semibold text-[#100f12] bg-cyan-300 rounded-xl shadow-[0_0_12px_#73FBFD70] hover:shadow-[0_0_18px_#73FBFD] hover:scale-105 transition-all focus:outline-none focus:ring-2 focus:ring-cyan-300 focus:ring-offset-2 focus:ring-offset-[#100f12]"
            >
              Admin Login
            </a>
          </div>
        </div>
      </div>
    </header>

    <main>
      <section
        class="relative py-20 h-screen bg-[url('/images/background.jpg')] bg-cover bg-center"
      >
        <!-- Strong Dark Overlay -->
        <div class="absolute inset-0"></div>

        <div class="flex justify-center relative z-10 xl:h-screen">
          <div class="w-full md:w-1/2 flex gap-10">
            <div
              class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center font-[Inter] 2xl:mt-48 scale-110"
            >
              <!-- Update Banner -->
              <a
                href="/updates"
                class="inline-flex flex-col sm:flex-row justify-between items-center py-2 px-3 sm:py-1 sm:px-1 pe-4 mb-7 text-xs sm:text-sm text-gray-900 bg-cyan-300/30 rounded-full hover:bg-cyan-300/50 shadow-[0_0_15px_#22d3ee70] transition"
              >
                <span
                  class="text-xs bg-cyan-300 rounded-full text-gray-900 px-3 py-1 sm:px-4 sm:py-1.5 me-0 sm:me-3 mb-1 sm:mb-0 shadow-[0_0_12px_#22d3ee80]"
                >
                  Update
                </span>
                <span class="text-xs sm:text-sm font-medium text-gray-100">
                  StreamVision v2.0 is live! Check out the new features ðŸš€
                </span>
              </a>

              <!-- Main Heading with Tailwind Gradient -->
              <h1
                class="text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight bg-gradient-to-bl to-cyan-200 from-cyan-500 bg-clip-text text-transparent drop-shadow-[0_0_20px_rgba(34,211,238,0.5)]"
              >
                Live RTSP Stream Viewer
              </h1>

              <!-- Subtitle -->
              <p
                class="mt-6 max-w-2xl mx-auto text-lg text-gray-200 drop-shadow-md"
              >
                Simply paste your camera's RTSP URL below to start viewing the
                live feed securely in your browser.
              </p>

              <!-- Input + Buttons (No border now) -->
              <div
                class="mt-12 max-w-3xl mx-auto bg-black/50 backdrop-blur-md rounded-2xl shadow-xl shadow-black/40 p-6 sm:p-8"
              >
                <div class="flex flex-col sm:flex-row items-center gap-4">
                  <!-- Input Field -->
                  <input
                    type="text"
                    id="rtspInput"
                    class="w-full px-4 py-3 text-base bg-black/40 backdrop-blur-md text-gray-100 placeholder-gray-400 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-300 focus:border-cyan-300 transition"
                    placeholder="rtsp://user:pass@ip_address:port/stream"
                  />

                  <!-- Primary Button -->
                  <button
                    id="playBtn"
                    class="flex-shrink-0 w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 text-base font-semibold text-gray-900 bg-cyan-300 rounded-lg shadow-lg hover:shadow-cyan-300/50 hover:scale-105 transition-all focus:outline-none focus:ring-2 focus:ring-cyan-300 focus:ring-offset-2"
                  >
                    â–¶ Start Stream
                  </button>

                  <!-- Secondary Button -->
                  <button
                    id="stopBtn"
                    class="hidden flex-shrink-0 w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 text-base font-semibold text-purple-400 border border-purple-400 rounded-lg hover:bg-purple-400 hover:text-gray-900 hover:shadow-[0_0_20px_#c084fc] transition-all focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-offset-2"
                  >
                    â–  Stop Stream
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="hidden md:block w-1/2">
            <!-- Video Container -->
            <div
              id="videoContainer"
              class="hidden mt-6 aspect-video bg-transparent rounded-lg overflow-hidden mx-6 backdrop-blur-sm"
            >
              <div
                id="loader"
                class="hidden absolute inset-0 flex items-center justify-center"
              >
                <div
                  class="loader ease-linear rounded-full border-4 border-t-4 border-gray-400 h-12 w-12"
                ></div>
              </div>
              <video
                id="videoPlayer"
                width="100%"
                controls
                class="w-full h-full hidden"
              ></video>
            </div>
          </div>
        </div>
      </section>

      <section
        id="tech-stack"
        class="w-full py-16 sm:py-20 lg:py-24 bg-dark-300 rounded-2xl shadow-2xl"
      >
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
          <!-- Section Heading -->
          <div class="mb-2">
            <span
              class="inline-flex items-center rounded-full bg-gradient-to-r from-accent-blue to-accent-cyan px-3 py-1 text-sm font-medium text-white shadow-lg"
            >
              <span
                class="h-2 w-2 rounded-full bg-white mr-2 animate-pulse"
              ></span>
              Technology Stack
            </span>
          </div>

          <h2 class="text-4xl font-bold text-white sm:text-5xl">
            Powered by Cutting-Edge
            <span
              class="bg-gradient-to-r from-accent-blue to-accent-cyan bg-clip-text text-transparent"
              >Technology</span
            >
          </h2>

          <p class="mt-6 max-w-2xl mx-auto text-lg leading-8 text-gray-300">
            StreamVision leverages powerful open-source technologies for
            exceptional speed, scalability, and security.
          </p>

          <!-- Tech Cards Grid -->
          <div
            class="mt-12 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"
          >
            <div
              class="tech-card gradient-border rounded-xl p-6 bg-dark-200 flex flex-col items-center"
            >
              <div
                class="w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-cyan-400 p-3 flex items-center justify-center mb-4 shadow-lg"
              >
                <svg
                  class="w-8 h-8 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"
                  ></path>
                </svg>
              </div>
              <h3 class="text-xl font-semibold text-white">FFmpeg</h3>
              <p class="mt-2 text-sm text-gray-400">
                Video processing backbone
              </p>
            </div>

            <div
              class="tech-card gradient-border rounded-xl p-6 bg-dark-200 flex flex-col items-center"
            >
              <div
                class="w-16 h-16 rounded-full bg-gradient-to-br from-purple-500 to-pink-400 p-3 flex items-center justify-center mb-4 shadow-lg"
              >
                <svg
                  class="w-8 h-8 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  ></path>
                </svg>
              </div>
              <h3 class="text-xl font-semibold text-white">HLS</h3>
              <p class="mt-2 text-sm text-gray-400">
                Adaptive streaming protocol
              </p>
            </div>

            <div
              class="tech-card gradient-border rounded-xl p-6 bg-dark-200 flex flex-col items-center"
            >
              <div
                class="w-16 h-16 rounded-full bg-gradient-to-br from-green-500 to-emerald-400 p-3 flex items-center justify-center mb-4 shadow-lg"
              >
                <svg
                  class="w-8 h-8 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"
                  ></path>
                </svg>
              </div>
              <h3 class="text-xl font-semibold text-white">Node.js</h3>
              <p class="mt-2 text-sm text-gray-400">Runtime environment</p>
            </div>

            <div
              class="tech-card gradient-border rounded-xl p-6 bg-dark-200 flex flex-col items-center"
            >
              <div
                class="w-16 h-16 rounded-full bg-gradient-to-br from-orange-500 to-amber-400 p-3 flex items-center justify-center mb-4 shadow-lg"
              >
                <svg
                  class="w-8 h-8 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 10V3L4 14h7v7l9-11h-7z"
                  ></path>
                </svg>
              </div>
              <h3 class="text-xl font-semibold text-white">Express.js</h3>
              <p class="mt-2 text-sm text-gray-400">
                Web application framework
              </p>
            </div>
          </div>

          <!-- Additional Info -->
          <div class="mt-12 gradient-border rounded-2xl p-6 bg-dark-200">
            <div class="flex flex-col md:flex-row items-center justify-between">
              <div class="text-left">
                <h3 class="text-xl font-semibold text-white">
                  Contribute to StreamVision
                </h3>
                <p class="mt-2 text-gray-300 max-w-xl">
                  StreamVision is an open-source project â€” and we welcome
                  contributions from developers, designers, and enthusiasts!
                  Help us improve performance, add new features, or fix bugs
                  while being part of a growing community.
                </p>
              </div>
              <a
                href="https://github.com/codebyamrit/StreamVision"
                class="mt-4 md:mt-0 px-6 py-3 bg-gradient-to-r from-accent-blue to-accent-cyan text-white font-medium rounded-lg hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1"
              >
                Contribute on GitHub
              </a>
            </div>
          </div>

          <!-- NetwonTeam Branding -->
          <div class="mt-12 flex flex-col items-center">
            <div class="relative">
              <div
                class="absolute -inset-3 bg-gradient-to-r from-accent-blue to-accent-cyan rounded-2xl blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200 animate-pulse-slow"
              ></div>
              <div
                class="relative gradient-border rounded-2xl p-4 bg-dark-200 flex items-center space-x-4"
              >
                <div
                  class="w-14 h-14 rounded-xl bg-gray-800 flex items-center justify-center shadow-inner"
                >
                  <img
                    src="/images/netwonteam.jpg"
                    class="text-2xl font-bold bg-gradient-to-r rounded-md from-accent-blue to-accent-cyan bg-clip-text text-transparent"
                  />
                </div>
                <div class="text-left">
                  <p class="text-sm font-medium text-gray-300">
                    Specially Designed for
                  </p>
                  <p class="text-lg font-bold text-white">NetwonTeam</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section
        id="features"
        class="py-20 sm:py-24 lg:py-32 bg-gradient-to-br from-[#050d1a] via-[#0a192f] to-[#0f213f]"
      >
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="text-center">
            <h2
              class="text-base font-semibold leading-7 text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-blue-500 drop-shadow-[0_0_12px_#38bdf8] gsap-reveal"
            >
              Why Choose StreamVision?
            </h2>
            <p
              class="mt-2 text-3xl font-extrabold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-sky-300 to-sky-500 drop-shadow-[0_0_18px_#38bdf8] sm:text-4xl gsap-reveal"
            >
              Everything You Need for Modern Surveillance
            </p>
            <p
              class="mt-6 max-w-2xl mx-auto text-lg leading-8 text-sky-200/80 gsap-reveal"
            >
              From low-latency viewing to secure sharing, we provide a robust
              platform for all your streaming needs.
            </p>
          </div>

          <div
            class="mt-16 grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3"
          >
            <!-- Card 1 -->
            <div
              class="p-8 rounded-xl bg-black/40 border border-sky-500/30 shadow-[0_0_20px] shadow-sky-500/20 backdrop-blur-sm hover:shadow-[0_0_35px] hover:shadow-sky-400/40 transition gsap-reveal"
            >
              <div
                class="inline-flex items-center justify-center w-12 h-12 rounded-lg bg-sky-500/10 border border-sky-500/40 text-sky-400"
              >
                <svg
                  class="w-7 h-7"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
                  ></path>
                </svg>
              </div>
              <h3 class="mt-5 text-xl font-bold text-sky-200">
                Low-Latency Streaming
              </h3>
              <p class="mt-2 text-base text-sky-300/80">
                Monitor multiple RTSP streams in real-time with ultra-low
                latency, powered by HLS and FFmpeg.
              </p>
            </div>

            <!-- Card 2 -->
            <div
              class="p-8 rounded-xl bg-black/40 border border-sky-500/30 shadow-[0_0_20px] shadow-sky-500/20 backdrop-blur-sm hover:shadow-[0_0_35px] hover:shadow-sky-400/40 transition gsap-reveal"
            >
              <div
                class="inline-flex items-center justify-center w-12 h-12 rounded-lg bg-sky-500/10 border border-sky-500/40 text-sky-400"
              >
                <svg
                  class="w-7 h-7"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"
                  ></path>
                </svg>
              </div>
              <h3 class="mt-5 text-xl font-bold text-sky-200">
                Public Shareable Links
              </h3>
              <p class="mt-2 text-base text-sky-300/80">
                Create time-bound public HLS stream URLs for quick sharing with
                external stakeholders without requiring a login.
              </p>
            </div>

            <!-- Card 3 -->
            <div
              class="p-8 rounded-xl bg-black/40 border border-sky-500/30 shadow-[0_0_20px] shadow-sky-500/20 backdrop-blur-sm hover:shadow-[0_0_35px] hover:shadow-sky-400/40 transition gsap-reveal"
            >
              <div
                class="inline-flex items-center justify-center w-12 h-12 rounded-lg bg-sky-500/10 border border-sky-500/40 text-sky-400"
              >
                <svg
                  class="w-7 h-7"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
                  ></path>
                </svg>
              </div>
              <h3 class="mt-5 text-xl font-bold text-sky-200">
                Secure and Encrypted
              </h3>
              <p class="mt-2 text-base text-sky-300/80">
                All data and video streams are protected with SSL/HTTPS
                encryption and robust security policies like CSP and Helmet.
              </p>
            </div>
          </div>
        </div>
      </section>

      <section class="py-20 sm:py-24">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
          <h2
            class="text-3xl font-bold tracking-tight text-slate-900 dark:text-white sm:text-4xl gsap-reveal"
          >
            About the Developer
          </h2>
          <p
            class="mt-4 text-lg text-slate-600 dark:text-slate-400 gsap-reveal"
          >
            StreamVision is developed and maintained by a passionate software
            engineer dedicated to building high-quality, real-time video
            solutions.
          </p>
        </div>
        <div
          class="mt-16 max-w-sm mx-auto bg-white dark:bg-slate-800/50 rounded-2xl shadow-lg p-8 text-center border border-slate-200 dark:border-slate-700 gsap-reveal"
        >
          <img
            class="w-24 h-24 rounded-full mx-auto"
            src="https://avatars.githubusercontent.com/u/35948782?v=4"
            alt="Amrit Sharma profile picture"
          />
          <div class="mt-4">
            <h3 class="text-xl font-semibold text-slate-900 dark:text-white">
              Amrit Sharma
            </h3>
            <p class="text-blue-600 dark:text-blue-400">Full-Stack Developer</p>
            <p class="mt-2 text-slate-600 dark:text-slate-400">
              Specializing in Node.js, FFmpeg, and real-time streaming
              technologies to create secure and scalable surveillance platforms.
            </p>
          </div>
          <div class="mt-6 flex justify-center space-x-5">
            <a
              href="https://github.com/CodeByAmrit/"
              target="_blank"
              class="text-slate-400 hover:text-slate-500 dark:hover:text-slate-300"
            >
              <span class="sr-only">GitHub</span>
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 16 16">
                <path
                  d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"
                />
              </svg>
            </a>
            <a
              href="https://www.linkedin.com/in/amrit-sharma-b11b88124/"
              target="_blank"
              class="text-slate-400 hover:text-slate-500 dark:hover:text-slate-300"
            >
              <span class="sr-only">LinkedIn</span>
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 16 16">
                <path
                  d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"
                />
              </svg>
            </a>
          </div>
        </div>
      </section>
    </main>

    <footer
      class="bg-white dark:bg-slate-950/20 border-t border-slate-200 dark:border-slate-800"
    >
      <div
        class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 md:flex md:items-center md:justify-between"
      >
        <div
          class="text-center text-sm text-slate-500 dark:text-slate-400 md:text-left"
        >
          &copy; 2025
          <a href="/" class="hover:underline">StreamVisionâ„¢</a>. All Rights
          Reserved.
        </div>
        <ul class="flex justify-center mt-4 space-x-6 md:mt-0 md:order-2">
          <li>
            <a
              href="#"
              class="text-sm text-slate-500 dark:text-slate-400 hover:underline"
              >About</a
            >
          </li>
          <li>
            <a
              href="/privacy-policy.html"
              class="text-sm text-slate-500 dark:text-slate-400 hover:underline"
              >Privacy Policy</a
            >
          </li>
          <li>
            <a
              href="/terms.html"
              class="text-sm text-slate-500 dark:text-slate-400 hover:underline"
              >Terms of Service</a
            >
          </li>
        </ul>
      </div>
    </footer>

    <script nonce="<%= nonce %>">
      // --- Element Selectors ---
      const rtspInput = document.getElementById("rtspInput");
      const playBtn = document.getElementById("playBtn");
      const stopBtn = document.getElementById("stopBtn");
      const videoContainer = document.getElementById("videoContainer"); // Container for player and loader
      const loader = document.getElementById("loader");
      const video = document.getElementById("videoPlayer");
      let currentRtspUrl = "";
      let hls = null; // To hold the HLS instance

      // --- Autoplay from URL Parameter ---
      window.addEventListener("DOMContentLoaded", () => {
        const params = new URLSearchParams(window.location.search);
        const rtsp = params.get("rtsp");
        if (rtsp) {
          rtspInput.value = rtsp;
          playBtn.click();
        }
      });

      // --- Main Play Logic ---
      playBtn.addEventListener("click", async function () {
        const rtspUrl = rtspInput.value.trim();

        if (!rtspUrl.startsWith("rtsp://")) {
          alert("Please enter a valid RTSP link starting with rtsp://");
          return;
        }

        // Show the video container and loader
        videoContainer.classList.remove("hidden");
        loader.classList.remove("hidden");
        video.classList.add("hidden");
        playBtn.disabled = true;

        try {
          const response = await fetch("/api/start-stream", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ rtspUrl }),
          });

          if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error || "Failed to start stream");
          }

          const data = await response.json();
          const hlsUrl = data.hlsUrl;
          if (!hlsUrl) throw new Error("No HLS URL returned from server");

          currentRtspUrl = rtspUrl;
          loadHlsStream(hlsUrl);
        } catch (err) {
          console.error("Error starting stream:", err);
          alert(`Failed to start stream: ${err.message}`);
          resetPlayerUI(true); // Reset UI and hide container on error
        }
      });

      // --- HLS Stream Loading with Retry ---
      function loadHlsStream(hlsUrl) {
        const maxAttempts = 8;
        let attempts = 0;

        const tryLoad = async () => {
          try {
            // Check if the manifest file is available
            const probe = await fetch(hlsUrl, { method: "HEAD" });
            if (probe.ok) {
              loader.classList.add("hidden");
              video.classList.remove("hidden");
              stopBtn.classList.remove("hidden");
              playBtn.disabled = false;

              if (Hls.isSupported()) {
                hls = new Hls();
                hls.loadSource(hlsUrl);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
              } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
                video.src = hlsUrl;
                video.addEventListener("loadedmetadata", () => video.play());
              } else {
                alert("HLS is not supported in this browser.");
                resetPlayerUI(true);
              }
              return; // Success, so exit the retry loop
            }
          } catch (e) {
            // This error is expected while waiting for the file, so we ignore it and retry
          }

          // If not successful, retry after a delay
          if (++attempts < maxAttempts) {
            setTimeout(tryLoad, 2000);
          } else {
            alert(
              "Stream not ready after multiple attempts. Please check the RTSP URL or try again later."
            );
            resetPlayerUI(true); // Reset UI and hide container on failure
          }
        };

        tryLoad();
      }

      // --- Stop Button Logic ---
      stopBtn.addEventListener("click", async function () {
        if (!currentRtspUrl) return;

        try {
          const response = await fetch("/api/stop-stream", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ rtspUrl: currentRtspUrl }),
          });
          if (response.ok) {
            resetPlayerUI(true);
          } else {
            const result = await response.json();
            alert(result.error || "Failed to stop the stream.");
          }
        } catch (err) {
          console.error("Error stopping stream:", err);
          alert("An error occurred while trying to stop the stream.");
        }
      });

      // --- UI Reset Function ---
      function resetPlayerUI(hideContainer = false) {
        // Destroy HLS instance if it exists to free up resources
        if (hls) {
          hls.destroy();
          hls = null;
        }
        video.pause();
        video.src = "";
        video.classList.add("hidden");
        stopBtn.classList.add("hidden");
        loader.classList.add("hidden");
        playBtn.disabled = false;
        currentRtspUrl = "";

        if (hideContainer) {
          videoContainer.classList.add("hidden");
        }
      }
    </script>
    <script nonce="<%= nonce %>">
      // --- GSAP Scroll Animations ---
      document.addEventListener("DOMContentLoaded", () => {
        // Wait for GSAP and ScrollTrigger to be available
        if (
          typeof gsap !== "undefined" &&
          typeof ScrollTrigger !== "undefined"
        ) {
          gsap.registerPlugin(ScrollTrigger);

          // Find all elements with the 'gsap-reveal' class and animate them
          gsap.utils.toArray(".gsap-reveal").forEach((elem) => {
            gsap.from(elem, {
              scrollTrigger: {
                trigger: elem,
                start: "top 85%", // Animation starts when the top of the element is 85% from the top of the viewport
                toggleActions: "play none none none", // Play the animation once when it enters and do nothing else
              },
              opacity: 0,
              y: 50, // Start 50px below its final position
              duration: 1,
              ease: "power3.out",
            });
          });
        }
      });
    </script>

    <script src="/js/theme.js" nonce="<%= nonce %>"></script>
  </body>
</html>
